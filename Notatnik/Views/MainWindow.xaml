<Window x:Class="Notatnik.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Notatnik.ViewModels"
        Title="MyNotes" Height="650" Width="1050"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI" FontSize="12">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <DockPanel>

        <!-- Menu główne -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Plik">
                <MenuItem Header="Nowa notatka tekstowa" Command="{Binding AddNoteCommand}" />
                <Separator/>
                <MenuItem Header="Zamknij" Command="{Binding ExitCommand}" />
            </MenuItem>

            <MenuItem Header="_Edycja">
                <MenuItem Header="Zarządzaj folderami" Command="{Binding ManageFoldersCommand}" />
            </MenuItem>
        </Menu>

        <!-- Pasek narzędzi -->
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button Content="📝" ToolTip="Nowa notatka tekstowa" Command="{Binding AddNoteCommand}" />
                <Button Content="☑️" ToolTip="Nowa notatka typu checkbox" Command="{Binding AddCheckboxNoteCommand}" />
                <Button Content="📄" ToolTip="Nowa długa notatka" Command="{Binding AddLongNoteCommand}" />
                <Separator/>
                <Button Content="📁" ToolTip="Nowy folder" Command="{Binding AddFolderCommand}" />
                <Separator/>
                <Button Content="🔍" ToolTip="Wyszukiwanie" Command="{Binding SearchCommand}" />
                <Button Content="🖨" ToolTip="Drukuj" Command="{Binding PrintCommand}" />
            </ToolBar>
        </ToolBarTray>


        <!-- Główna część -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="2" />
                <ColumnDefinition Width="4*" />
            </Grid.ColumnDefinitions>

            <!-- Foldery -->
            <Grid Grid.Column="0" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Foldery" FontSize="14" FontWeight="Bold" Margin="0,0,0,5" Grid.Row="0"/>

                <ListView x:Name="ListViewFolders"
                          Grid.Row="1"
                          ItemsSource="{Binding Folders}"
                          SelectedItem="{Binding SelectedFolder}"
                          SelectionMode="Single">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="" Width="30">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsMarkedForDeletion, Mode=TwoWay}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Nazwa folderu"
                                            DisplayMemberBinding="{Binding Name}"
                                            Width="200"/>
                        </GridView>
                    </ListView.View>
                </ListView>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0" Grid.Row="2">
                    <Button Content="Dodaj" Width="70" Margin="0,0,5,0"
                            Command="{Binding AddFolderCommand}"/>
                    <Button Content="Edytuj" Width="70" Margin="0,0,5,0"
                            Command="{Binding EditFolderCommand}"/>
                    <Button Content="Usuń zaznaczone" Width="120"
                            Command="{Binding DeleteMarkedFoldersCommand}"/>
                </StackPanel>
            </Grid>

            <!-- Separator -->
            <Border Grid.Column="1" Background="LightGray" Width="1" HorizontalAlignment="Stretch" />

            <!-- Notatki -->
            <Grid Grid.Column="2" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Notatki" FontSize="14" FontWeight="Bold" Margin="0,0,0,5" Grid.Row="0"/>

                <ListView x:Name="ListViewNotes"
                Grid.Row="1"
                ItemsSource="{Binding Notes}"
                SelectedItem="{Binding SingleSelectedNote}"
                SelectionMode="Single"
                HorizontalAlignment="Stretch"
                MouseDoubleClick="ListViewNotes_MouseDoubleClick">
                    <ListView.View>
                        <GridView AllowsColumnReorder="True">
                            <!-- Checkbox -->
                            <GridViewColumn Header="" Width="30">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsMarkedForDeletion, Mode=TwoWay}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <!-- Tytuł -->
                            <GridViewColumn Header="Tytuł" Width="200">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Title}" TextWrapping="NoWrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <!-- Podgląd -->
                            <GridViewColumn Header="Podgląd" Width="300">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Snippet}" TextWrapping="NoWrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <!-- Utworzono -->
                            <GridViewColumn Header="Utworzono" Width="130">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding CreatedAt, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <!-- Zmodyfikowano -->
                            <GridViewColumn Header="Zmodyfikowano" Width="140">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ModifiedAt, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>


                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0" Grid.Row="2">
                    <Button Content="Dodaj notatkę" Width="100" Margin="0,0,5,0"
                Command="{Binding AddNoteCommand}"/>
                    <Button Content="Edytuj notatkę" Width="100" Margin="0,0,5,0"
                Command="{Binding EditNoteCommand}"/>
                    <Button Content="Usuń zaznaczone" Width="120"
                Command="{Binding DeleteMarkedNotesCommand}"/>
                </StackPanel>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
