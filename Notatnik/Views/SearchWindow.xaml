<Window x:Class="Notatnik.Views.SearchWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:Notatnik.Models"
        xmlns:vm="clr-namespace:Notatnik.ViewModels"
        Title="Wyszukaj notatki"
        Width="800"
        Height="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        DataContext="{Binding RelativeSource={RelativeSource Self}, Path=ViewModel}">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 0: Panel wyszukiwania -->
            <RowDefinition Height="*"/>
            <!-- 1: Lista wyników -->
        </Grid.RowDefinitions>

        <!-- 0. Panel wyszukiwania -->
        <StackPanel Orientation="Horizontal"
                    Grid.Row="0"
                    Margin="0,0,0,10">
            <TextBox x:Name="SearchTextBox"
                     Width="300"
                     Height="25"
                     Margin="0,0,10,0"
                     VerticalContentAlignment="Center"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     ToolTip="Wpisz część tytułu, treści lub nazwy tagu..." />

            <Button Content="Szukaj"
                    Width="80"
                    Command="{Binding SearchNotesCommand}"
                    Margin="0,0,10,0"/>

            <Button Content="Wyczyść"
                    Width="80"
                    Command="{Binding ClearCommand}" />
        </StackPanel>

        <!-- 1. Lista wyników wyszukiwania -->
        <ListView Grid.Row="1"
                  ItemsSource="{Binding SearchResults}"
                  SelectedItem="{Binding SelectedResult}"
                  MouseDoubleClick="ListViewResults_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <!-- Kolumna: Tytuł -->
                    <GridViewColumn Header="Tytuł" Width="250">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}" TextWrapping="NoWrap"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <!-- Kolumna: Snippet -->
                    <GridViewColumn Header="Podgląd" Width="300">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Snippet}" TextWrapping="NoWrap"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <!-- Kolumna: Data modyfikacji -->
                    <GridViewColumn Header="Zmodyfikowano" Width="130">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ModifiedAt, StringFormat=\{0:yyyy-MM-dd HH:mm\}}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window>
